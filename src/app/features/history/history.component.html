<ActionBar title="Prayer Streaks"></ActionBar>

<GridLayout rows="auto, auto, *">
  <!-- Stats bar -->
  <GridLayout row="0" columns="*, *" class="p-4 mx-4 mt-5 mb-3 rounded-2xl bg-white dark:bg-[#1c1c1e]">
    <StackLayout col="0" class="text-center p-2">
      <Label
        [text]="checkinService.currentStreak()"
        class="text-center text-3xl font-bold text-orange-500"
      ></Label>
      <Label
        text="Current"
        class="text-center text-sm text-gray-500 dark:text-gray-400"
      ></Label>
    </StackLayout>
    <StackLayout col="1" class="text-center p-2">
      <Label
        [text]="checkinService.longestStreak()"
        class="text-center text-3xl font-bold text-blue-500"
      ></Label>
      <Label
        text="Longest"
        class="text-center text-sm text-gray-500 dark:text-gray-400"
      ></Label>
    </StackLayout>
  </GridLayout>

  <Label row="1" text="Last 30 Days" class="text-2xl font-bold ml-4 mb-2 dark:text-white"></Label>

  <!-- History list -->
  <ListView
    row="2"
    [items]="historyItems()"
    separatorColor="transparent"
    class="mx-4 rounded-2xl bg-white dark:bg-[#1c1c1e]"
  >
    <ng-template let-item="item">
      <StackLayout>
        <Label
          *ngIf="item.isMonthHeader"
          [text]="item.monthYear"
          class="text-sm font-bold text-gray-400 dark:text-gray-500 p-2 px-4 mt-2 uppercase"
        ></Label>
        <GridLayout
          *ngIf="!item.isMonthHeader"
          columns="auto, auto, *, auto"
          class="py-3 px-4 border-b border-gray-100 dark:border-gray-700"
        >
          <!-- iOS: SFSymbols -->
          <Image
            *ngIf="isIOS"
            col="0"
            [src]="item.checked ? 'sys://checkmark.circle.fill' : 'sys://xmark'"
            [tintColor]="item.checked ? '#22c55e' : '#ef4444'"
            width="20" height="20"
          ></Image>
          <!-- Android: Material Icons -->
          <Label
            *ngIf="!isIOS"
            col="0"
            [text]="item.checked ? checkIcon : closeIcon"
            class="material-icon"
            style="font-size: 20"
            [class.text-green-500]="item.checked"
            [class.text-red-500]="!item.checked"
            width="24"
          ></Label>
          <Label
            col="1"
            [text]="item.displayDate"
            class="text-base ml-3 dark:text-gray-200"
            [class.text-gray-800]="item.checked"
            [class.text-gray-400]="!item.checked"
          ></Label>
          <Label col="2" text=""></Label>
          <Label
            *ngIf="item.prayerType"
            col="3"
            [text]="item.prayerType"
            class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-full px-2 py-1"
          ></Label>
        </GridLayout>
      </StackLayout>
    </ng-template>
  </ListView>
</GridLayout>
